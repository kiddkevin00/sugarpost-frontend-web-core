{"version":3,"sources":["../../../src/lib/server/app.js"],"names":["process","env","NODE_ENV","require","setupExpressServer","setupRoutes","packageJson","express","http","app","server","createServer","ip","IP","config","port","PORT","webServer","listen","console","log","address","get","on","module","exports"],"mappings":";;AAAA;;;;AAIAA,QAAQC,GAAR,CAAYC,QAAZ,GAAuBF,QAAQC,GAAR,CAAYC,QAAZ,IAAwB,aAA/C;;AAEA,IAAIF,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCC,UAAQ,gBAAR;AACD;;AAED,IAAMC,qBAAqBD,QAAQ,kBAAR,CAA3B;AACA,IAAME,cAAcF,QAAQ,UAAR,CAApB;AACA,IAAMG,cAAcH,QAAQ,uBAAR,CAApB;AACA,IAAMI,UAAUJ,QAAQ,SAAR,CAAhB;AACA,IAAMK,OAAOL,QAAQ,MAAR,CAAb;;AAEA,IAAMM,MAAMF,SAAZ;AACA,IAAMG,SAASF,KAAKG,YAAL,CAAkBF,GAAlB,CAAf;;AAEAL,mBAAmBK,GAAnB;AACAJ,YAAYI,GAAZ;;AAEA,IAAMG,KAAKZ,QAAQC,GAAR,CAAYY,EAAZ,IAAmBP,YAAYQ,MAAZ,CAAmBF,EAAjD;AACA,IAAMG,OAAOf,QAAQC,GAAR,CAAYe,IAAZ,IAAoBV,YAAYQ,MAAZ,CAAmBC,IAApD;;AAEA,IAAME,YAAYP,OAAOQ,MAAP,CAAcH,IAAd,EAAoBH,EAApB,EAAwB,YAAM;AAC9C;AACAO,UAAQC,GAAR,CAAY,6DAAZ,EACEH,UAAUI,OAAV,GAAoBN,IADtB,EAEEE,UAAUI,OAAV,GAAoBA,OAFtB,EAE+BZ,IAAIa,GAAJ,CAAQ,KAAR,CAF/B;AAGD,CALiB,CAAlB;;AAOA;AACAtB,QAAQuB,EAAR,CAAW,mBAAX,EAAgC,YAAM,CAErC,CAFD;AAGA;AACAvB,QAAQuB,EAAR,CAAW,SAAX,EAAsB,YAAM,CAE3B,CAFD;;AAIAC,OAAOC,OAAP,GAAiBA,UAAUhB,GAA3B","file":"app.js","sourcesContent":["/**\n * The process of the web application begins here - non-cluster mode.\n */\n\nprocess.env.NODE_ENV = process.env.NODE_ENV || 'development';\n\nif (process.env.NODE_ENV !== 'production') {\n  require('babel-register');\n}\n\nconst setupExpressServer = require('./express-server');\nconst setupRoutes = require('./routes');\nconst packageJson = require('../../../package.json');\nconst express = require('express');\nconst http = require('http');\n\nconst app = express();\nconst server = http.createServer(app);\n\nsetupExpressServer(app);\nsetupRoutes(app);\n\nconst ip = process.env.IP  || packageJson.config.ip;\nconst port = process.env.PORT || packageJson.config.port;\n\nconst webServer = server.listen(port, ip, () => {\n  // [TODO] Replaces `console.log()` with a logger module.\n  console.log('Express server listening on port: %d at IP: %s, in %s mode.',\n    webServer.address().port,\n    webServer.address().address, app.get('env'));\n});\n\n// [TODO] Cleans up whenever the app crashes.\nprocess.on('uncaughtException', () => {\n\n});\n// [TODO] Cleans up whenever getting a default kill signal.\nprocess.on('SIGTERM', () => {\n\n});\n\nmodule.exports = exports = app;\n"]}