'use strict';

/**
 * The process of the web application begins here - non-cluster mode.
 */

process.env.NODE_ENV = process.env.NODE_ENV || 'development';

if (process.env.NODE_ENV !== 'production') {
  require('babel-register');
}

var setupExpressServer = require('./express-server');
var setupRoutes = require('./routes');
var packageJson = require('../../../package.json');
var express = require('express');
var http = require('http');

var app = express();
var server = http.createServer(app);

// Set default Node environment to "development".


setupExpressServer(app);
setupRoutes(app);

var ip = process.env.IP_ADDRESS || packageJson.config.ip || '0.0.0.0';
var port = process.env.PORT || process.env.PORT_NUMBER_HTTP || packageJson.config.port;

var webServer = server.listen(port, ip, function () {
  // [TODO] Replace with logger module.
  console.log('Express server listening on port: %d at IP: %s, in %s mode', webServer.address().port, webServer.address().address, app.get('env'));
});

module.exports = exports = app;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvc2VydmVyL2FwcC5qcyJdLCJuYW1lcyI6WyJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJyZXF1aXJlIiwic2V0dXBFeHByZXNzU2VydmVyIiwic2V0dXBSb3V0ZXMiLCJwYWNrYWdlSnNvbiIsImV4cHJlc3MiLCJodHRwIiwiYXBwIiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwiaXAiLCJJUF9BRERSRVNTIiwiY29uZmlnIiwicG9ydCIsIlBPUlQiLCJQT1JUX05VTUJFUl9IVFRQIiwid2ViU2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImFkZHJlc3MiLCJnZXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBSUFBLFFBQVFDLEdBQVIsQ0FBWUMsUUFBWixHQUF1QkYsUUFBUUMsR0FBUixDQUFZQyxRQUFaLElBQXdCLGFBQS9DOztBQUVBLElBQUlGLFFBQVFDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixZQUE3QixFQUEyQztBQUN6Q0MsVUFBUSxnQkFBUjtBQUNEOztBQUVELElBQU1DLHFCQUFxQkQsUUFBUSxrQkFBUixDQUEzQjtBQUNBLElBQU1FLGNBQWNGLFFBQVEsVUFBUixDQUFwQjtBQUNBLElBQU1HLGNBQWNILFFBQVEsdUJBQVIsQ0FBcEI7QUFDQSxJQUFNSSxVQUFVSixRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNSyxPQUFPTCxRQUFRLE1BQVIsQ0FBYjs7QUFFQSxJQUFNTSxNQUFNRixTQUFaO0FBQ0EsSUFBTUcsU0FBU0YsS0FBS0csWUFBTCxDQUFrQkYsR0FBbEIsQ0FBZjs7QUFFQTs7O0FBR0FMLG1CQUFtQkssR0FBbkI7QUFDQUosWUFBWUksR0FBWjs7QUFFQSxJQUFNRyxLQUFLWixRQUFRQyxHQUFSLENBQVlZLFVBQVosSUFBMEJQLFlBQVlRLE1BQVosQ0FBbUJGLEVBQTdDLElBQW1ELFNBQTlEO0FBQ0EsSUFBTUcsT0FBT2YsUUFBUUMsR0FBUixDQUFZZSxJQUFaLElBQW9CaEIsUUFBUUMsR0FBUixDQUFZZ0IsZ0JBQWhDLElBQW9EWCxZQUFZUSxNQUFaLENBQW1CQyxJQUFwRjs7QUFFQSxJQUFNRyxZQUFZUixPQUFPUyxNQUFQLENBQWNKLElBQWQsRUFBb0JILEVBQXBCLEVBQXdCLFlBQU07QUFDOUM7QUFDQVEsVUFBUUMsR0FBUixDQUFZLDREQUFaLEVBQ0VILFVBQVVJLE9BQVYsR0FBb0JQLElBRHRCLEVBRUVHLFVBQVVJLE9BQVYsR0FBb0JBLE9BRnRCLEVBRStCYixJQUFJYyxHQUFKLENBQVEsS0FBUixDQUYvQjtBQUdELENBTGlCLENBQWxCOztBQU9BQyxPQUFPQyxPQUFQLEdBQWlCQSxVQUFVaEIsR0FBM0IiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgcHJvY2VzcyBvZiB0aGUgd2ViIGFwcGxpY2F0aW9uIGJlZ2lucyBoZXJlIC0gbm9uLWNsdXN0ZXIgbW9kZS5cbiAqL1xuXG5wcm9jZXNzLmVudi5OT0RFX0VOViA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHJlcXVpcmUoJ2JhYmVsLXJlZ2lzdGVyJyk7XG59XG5cbmNvbnN0IHNldHVwRXhwcmVzc1NlcnZlciA9IHJlcXVpcmUoJy4vZXhwcmVzcy1zZXJ2ZXInKTtcbmNvbnN0IHNldHVwUm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMnKTtcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vLi4vLi4vcGFja2FnZS5qc29uJyk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcblxuLy8gU2V0IGRlZmF1bHQgTm9kZSBlbnZpcm9ubWVudCB0byBcImRldmVsb3BtZW50XCIuXG5cblxuc2V0dXBFeHByZXNzU2VydmVyKGFwcCk7XG5zZXR1cFJvdXRlcyhhcHApO1xuXG5jb25zdCBpcCA9IHByb2Nlc3MuZW52LklQX0FERFJFU1MgfHwgcGFja2FnZUpzb24uY29uZmlnLmlwIHx8ICcwLjAuMC4wJztcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IHByb2Nlc3MuZW52LlBPUlRfTlVNQkVSX0hUVFAgfHwgcGFja2FnZUpzb24uY29uZmlnLnBvcnQ7XG5cbmNvbnN0IHdlYlNlcnZlciA9IHNlcnZlci5saXN0ZW4ocG9ydCwgaXAsICgpID0+IHtcbiAgLy8gW1RPRE9dIFJlcGxhY2Ugd2l0aCBsb2dnZXIgbW9kdWxlLlxuICBjb25zb2xlLmxvZygnRXhwcmVzcyBzZXJ2ZXIgbGlzdGVuaW5nIG9uIHBvcnQ6ICVkIGF0IElQOiAlcywgaW4gJXMgbW9kZScsXG4gICAgd2ViU2VydmVyLmFkZHJlc3MoKS5wb3J0LFxuICAgIHdlYlNlcnZlci5hZGRyZXNzKCkuYWRkcmVzcywgYXBwLmdldCgnZW52JykpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGFwcDtcbiJdfQ==
//# sourceMappingURL=app.js.map
