'use strict';

/**
 * The process of the web application begins here - non-cluster mode.
 */

process.env.NODE_ENV = process.env.NODE_ENV || 'development';

if (process.env.NODE_ENV !== 'production') {
  require('babel-register');
}

var setupExpressServer = require('./express-server');
var setupRoutes = require('./routes');
var packageJson = require('../../../package.json');
var express = require('express');
var http = require('http');

var app = express();
var server = http.createServer(app);

// Set default Node environment to "development".


setupExpressServer(app);
setupRoutes(app);

console.log('###', process.env.PORT);

var ip = '0.0.0.0' || process.env.IP_ADDRESS || packageJson.config.ip;
var port = process.env.PORT || process.env.PORT_NUMBER_HTTP || packageJson.config.port;

var webServer = server.listen(port, ip, function () {
  // [TODO] Replace with logger module.
  console.log('Express server listening on port: %d at IP: %s, in %s mode', webServer.address().port, webServer.address().address, app.get('env'));
});

exports.app = app;module.exports = exports = app;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvc2VydmVyL2FwcC5qcyJdLCJuYW1lcyI6WyJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJyZXF1aXJlIiwic2V0dXBFeHByZXNzU2VydmVyIiwic2V0dXBSb3V0ZXMiLCJwYWNrYWdlSnNvbiIsImV4cHJlc3MiLCJodHRwIiwiYXBwIiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwiY29uc29sZSIsImxvZyIsIlBPUlQiLCJpcCIsIklQX0FERFJFU1MiLCJjb25maWciLCJwb3J0IiwiUE9SVF9OVU1CRVJfSFRUUCIsIndlYlNlcnZlciIsImxpc3RlbiIsImFkZHJlc3MiLCJnZXQiLCJleHBvcnRzIiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBSUFBLFFBQVFDLEdBQVIsQ0FBWUMsUUFBWixHQUF1QkYsUUFBUUMsR0FBUixDQUFZQyxRQUFaLElBQXdCLGFBQS9DOztBQUVBLElBQUlGLFFBQVFDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixZQUE3QixFQUEyQztBQUN6Q0MsVUFBUSxnQkFBUjtBQUNEOztBQUVELElBQU1DLHFCQUFxQkQsUUFBUSxrQkFBUixDQUEzQjtBQUNBLElBQU1FLGNBQWNGLFFBQVEsVUFBUixDQUFwQjtBQUNBLElBQU1HLGNBQWNILFFBQVEsdUJBQVIsQ0FBcEI7QUFDQSxJQUFNSSxVQUFVSixRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNSyxPQUFPTCxRQUFRLE1BQVIsQ0FBYjs7QUFFQSxJQUFNTSxNQUFNRixTQUFaO0FBQ0EsSUFBTUcsU0FBU0YsS0FBS0csWUFBTCxDQUFrQkYsR0FBbEIsQ0FBZjs7QUFFQTs7O0FBR0FMLG1CQUFtQkssR0FBbkI7QUFDQUosWUFBWUksR0FBWjs7QUFFQUcsUUFBUUMsR0FBUixDQUFZLEtBQVosRUFBbUJiLFFBQVFDLEdBQVIsQ0FBWWEsSUFBL0I7O0FBRUEsSUFBTUMsS0FBSyxhQUFhZixRQUFRQyxHQUFSLENBQVllLFVBQXpCLElBQXVDVixZQUFZVyxNQUFaLENBQW1CRixFQUFyRTtBQUNBLElBQU1HLE9BQU9sQixRQUFRQyxHQUFSLENBQVlhLElBQVosSUFBb0JkLFFBQVFDLEdBQVIsQ0FBWWtCLGdCQUFoQyxJQUFvRGIsWUFBWVcsTUFBWixDQUFtQkMsSUFBcEY7O0FBRUEsSUFBTUUsWUFBWVYsT0FBT1csTUFBUCxDQUFjSCxJQUFkLEVBQW9CSCxFQUFwQixFQUF3QixZQUFNO0FBQzlDO0FBQ0FILFVBQVFDLEdBQVIsQ0FBWSw0REFBWixFQUNFTyxVQUFVRSxPQUFWLEdBQW9CSixJQUR0QixFQUVFRSxVQUFVRSxPQUFWLEdBQW9CQSxPQUZ0QixFQUUrQmIsSUFBSWMsR0FBSixDQUFRLEtBQVIsQ0FGL0I7QUFHRCxDQUxpQixDQUFsQjs7QUFPQUMsUUFBUWYsR0FBUixHQUFjQSxHQUFkLENBQWtCZ0IsT0FBT0QsT0FBUCxHQUFpQkEsVUFBVWYsR0FBM0IiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgcHJvY2VzcyBvZiB0aGUgd2ViIGFwcGxpY2F0aW9uIGJlZ2lucyBoZXJlIC0gbm9uLWNsdXN0ZXIgbW9kZS5cbiAqL1xuXG5wcm9jZXNzLmVudi5OT0RFX0VOViA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHJlcXVpcmUoJ2JhYmVsLXJlZ2lzdGVyJyk7XG59XG5cbmNvbnN0IHNldHVwRXhwcmVzc1NlcnZlciA9IHJlcXVpcmUoJy4vZXhwcmVzcy1zZXJ2ZXInKTtcbmNvbnN0IHNldHVwUm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMnKTtcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vLi4vLi4vcGFja2FnZS5qc29uJyk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcblxuLy8gU2V0IGRlZmF1bHQgTm9kZSBlbnZpcm9ubWVudCB0byBcImRldmVsb3BtZW50XCIuXG5cblxuc2V0dXBFeHByZXNzU2VydmVyKGFwcCk7XG5zZXR1cFJvdXRlcyhhcHApO1xuXG5jb25zb2xlLmxvZygnIyMjJywgcHJvY2Vzcy5lbnYuUE9SVClcblxuY29uc3QgaXAgPSAnMC4wLjAuMCcgfHwgcHJvY2Vzcy5lbnYuSVBfQUREUkVTUyB8fCBwYWNrYWdlSnNvbi5jb25maWcuaXA7XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCBwcm9jZXNzLmVudi5QT1JUX05VTUJFUl9IVFRQIHx8IHBhY2thZ2VKc29uLmNvbmZpZy5wb3J0O1xuXG5jb25zdCB3ZWJTZXJ2ZXIgPSBzZXJ2ZXIubGlzdGVuKHBvcnQsIGlwLCAoKSA9PiB7XG4gIC8vIFtUT0RPXSBSZXBsYWNlIHdpdGggbG9nZ2VyIG1vZHVsZS5cbiAgY29uc29sZS5sb2coJ0V4cHJlc3Mgc2VydmVyIGxpc3RlbmluZyBvbiBwb3J0OiAlZCBhdCBJUDogJXMsIGluICVzIG1vZGUnLFxuICAgIHdlYlNlcnZlci5hZGRyZXNzKCkucG9ydCxcbiAgICB3ZWJTZXJ2ZXIuYWRkcmVzcygpLmFkZHJlc3MsIGFwcC5nZXQoJ2VudicpKTtcbn0pO1xuXG5leHBvcnRzLmFwcCA9IGFwcDttb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBhcHA7XG4iXX0=
//# sourceMappingURL=app.js.map
